@model QPortal.ViewModels.ReportViewModel

@{
    ViewBag.Title = "Report Per Pubblicazione";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="row">
    <div class="col-md-10 col-md-offset-1">
        <h2>Report per Pubblicazione</h2>

        @using (Html.BeginForm("Publish","Reports", FormMethod.Post))
        {
            @Html.AntiForgeryToken()

            @Html.ValidationSummary(true, "", new { @class = "text-danger" })

            <div class="form-group">
                <h3 class="lead">Pubblica nello Stream</h3>
                @Html.DropDownListFor(m => m.Streams, new SelectList(Model.Streams), null, new { @class = "form-control h3" })
            </div>

            <div class="form-group">
                <h3 class="lead">Report privati presenti nello stream di lavoro</h3>
                <table id="reports" class="table table-bordered table-hover">
                    <thead>
                        <tr>
                            <th>Owner</th>
                            <th>Report</th>
                            <th>Seleziona</th>
                        </tr>
                    </thead>
                    <tbody>

                        @foreach (var report in Model.Reports)
                        {
                            <tr class="text-center">
                                <td>
                                    @report.Owner
                                </td>
                                <td>
                                    @report.ReportName
                                </td>
                                <td class="select-checkbox">
                                    <div class="checkbox">
                                        <input id="checkbox" type="checkbox">
                                    </div>
                                </td>
                            </tr>
                        }

                    </tbody>
                </table>
            </div>

            <div class="row">
                <div class="float-right">
                    <div class="btn-group" role="group" aria-label="crea report">
                        <button href="#" type="reset" class="btn btn-primary equalsize">Annulla</button>
                        <button href="#" type="submit" class="btn btn-primary equalsize">Pubblica</button>
                    </div>
                </div>
            </div>
        }

    </div>
</div>

@section scripts
    {
    <script>
        $(document).ready(function () {

            var table = $("#reports").DataTable({
                columnDefs: [{
                    orderable: false,
                    className: 'select-checkbox',
                    targets: 2
                }],
                //select: {
                //    style: 'os',
                //    selector: 'td:last-child'
                //}
                select: {
                    style: 'single'
                }

            });

            table.on('select', function (e, dt, type, indexes) {
                var rowData = table.rows(indexes).data().toArray();
                console.log(JSON.stringify(rowData));
                console.log(rowData.innerHTML);
            });

        });
    </script>
}